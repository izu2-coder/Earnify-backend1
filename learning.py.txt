from flask import Blueprint, request, jsonify learning_bp = Blueprint('learning', __name__) # Mock course data courses_db = { "python-side-hustle": {"title": "Python for Side Hustles", "price": "₦800"}, "no-code-apps": {"title": "No-Code Apps in 1 Week", "price": "₦600"}, "tiktok-pro": {"title": "TikTok Influencer Pro", "price": "₦500"}, "affiliate-japa": {"title": "Affiliate Japa Guide", "price": "₦750"} } user_progress = {} @learning_bp.route('/enroll', methods=['POST']) def enroll_course(): data = request.get_json() user_id = data.get('user_id') course_id = data.get('course_id') if not user_id or not course_id: return jsonify({"error": "Missing user or course ID"}), 400 if course_id not in courses_db: return jsonify({"error": "Course not found"}), 400 user_progress[f"{user_id}_{course_id}"] = { "status": "enrolled", "progress": 0 } return jsonify({ "message": "Enrollment successful", "course": courses_db[course_id] }), 200 @learning_bp.route('/complete', methods=['POST']) def complete_course(): data = request.get_json() user_id = data.get('user_id') course_id = data.get('course_id') key = f"{user_id}_{course_id}" if user_progress.get(key, {}).get("status") != "enrolled": return jsonify({"error": "User not enrolled or already completed"}), 400 user_progress[key]["status"] = "completed" user_progress[key]["progress"] = 100 return jsonify({ "message": "Course completed!", "unlocked_gigs": ["high-paying-task-1", "freelance-job-2"] }), 200